{% include 'includes/head.html' %}
{% if session.usuario_logado %}
  {% include 'includes/navbar.html' %}
{% endif %}

<body>
  <div class="menu-container">
    <h2>Criar novo usuário</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages-fixed" id="flash-container">
          {% for category, message in messages %}
            <div class="alert {{ 'alert-success' if category == 'success' else 'alert-danger' }}">{{ message|safe }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <div class="form-box" style="max-width:520px; margin:0 auto;">
      <form method="post" autocomplete="off">
        <label for="nome">Nome completo</label>
        <input type="text" id="nome" name="nome" required>

        <label for="username_local">E-mail</label>
        <div class="email-wrapper">
          <input
            type="text"
            id="username_local"
            name="username_local"
            placeholder="usuario"
            required
            pattern="^[a-zA-Z0-9._%+-]+$"
          >
          <span class="email-domain">@verointernet.com.br</span>
        </div>

        <label for="tipo_id">Perfil</label>
        <select id="tipo_id" name="tipo_id" required>
          {% for p in perfis %}
            <option value="{{ p.id }}">{{ p.nome }}</option>
          {% endfor %}
        </select>

        <label for="senha">Senha</label>
        <input type="password" id="senha" name="senha" minlength="8" required>

        <label for="confirmar">Confirmar senha</label>
        <input type="password" id="confirmar" name="confirmar" minlength="8" required>

        <button type="submit">Criar usuário</button>
      </form>

      <div style="text-align:center; margin-top:16px;">
        <a class="btn-voltar" href="{{ url_for('home') }}">Voltar</a>
      </div>
    </div>
  </div>
</body>

{% include 'includes/footer.html' %}
